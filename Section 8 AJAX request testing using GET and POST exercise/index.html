<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1,shrink-to-fit=no"
    />
    <title>Ajax tester</title>
    <style>
      .heading {
        display: block;
        width: 100%;
        border: 1px solid black;
        background-color: #222;
        color: #fff;
        padding: 10px;
      }

      div > p {
        font-size: 0.8em;
        color: #111;
        padding: 20px;
        background-color: #ddd;
      }
    </style>
  </head>
  <body>
    <h1>AJAX Tester</h1>
    <div>
      URL:<input type="text" name="url" value="https://reqres.in/api/users/2"
    </div>
    <div><input type="button" name="sender" value="Make Request" /></div>
    <div class="" id="output"></div>
    <script>
      document.addEventListener("DOMContentLoaded", function (event) {
        document
          .querySelector('input[name="sender"]')
          .addEventListener("click", makeRequest);
      });

      function makeRequest() {
        var url = document.querySelector('input[name="url"]').value;
        ajaxJS(url);
      }

      function ajaxJS(url) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            output(xhr.responseText, xhr.status, "JavaScript response");
          }
        };
        xhr.open("GET", url, true);
        xhr.send();
      }

      function output(responseText, status, xhr) {
        var output = document.getElementById("output");
        responseText =
          typeof responseText == "string"
            ? JSON.parse(responseText)
            : responseText;
        output.innerHTML = `<div><span class="heading">Response Text:</span><p>${JSON.stringify(
          responseText
        )}</p>`;
        output.innerHTML += `<div><span class="heading">Status:</span><p>${JSON.stringify(
          status
        )}</p>`;
        output.innerHTML += `<div><span class="heading">Response:</span><p>${JSON.stringify(
          xhr
        )}</p>`;
      }
    </script>
  </body>
</html>
